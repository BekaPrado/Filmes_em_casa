generator client {
  provider = "prisma-client-js"
  output   = "./node_modules/@prisma/client"  // Caminho de sa√≠da sugerido
}


datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Filme {
  id                  Int                   @id @default(autoincrement())
  nome              String                @db.VarChar(45)
  duracao             DateTime?             @db.Time(0)
  sinopse             String?               @db.Text
  data_lancamento     DateTime?             @db.Date
  foto_capa           String?               @db.VarChar(200)
  link_trailer        String?               @db.VarChar(200)
  tb_pais_id          Int?
  tb_idioma_id        Int?
  tbl_avaliacao       tbl_avaliacao[]
  tbl_idioma          Idioma?               @relation(fields: [tb_idioma_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_IDIOMA_FILME")
  tbl_pais            tbl_pais?             @relation(fields: [tb_pais_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_PAIS_FILME")
  tbl_filme_ator      tbl_filme_ator[]
  tbl_filme_diretor   tbl_filme_diretor[]
  tbl_filme_genero    tbl_filme_genero[]
  tbl_filme_produtora tbl_filme_produtora[]

  @@index([tb_idioma_id], map: "FK_IDIOMA_FILME")
  @@index([tb_pais_id], map: "FK_PAIS_FILME")
  @@map("tbl_filme")
}

model Genero {
  id               Int                @id @default(autoincrement())
  nome             String             @db.VarChar(45)
  tbl_filme_genero tbl_filme_genero[]

  @@map("tbl_genero")
}

model Idioma {
  id          Int           @id @default(autoincrement())
  nome        String        @db.VarChar(45)
  arquivo_url String?       @db.VarChar(45)
  tbl_filme   Filme[]
  tbl_legenda tbl_legenda[]

  @@map("tbl_idioma")
}

model tbl_nacionalidade {
  id                        Int                         @id @default(autoincrement())
  nacionalidade             String                      @db.VarChar(45)
  tbl_ator_nacionalidade    tbl_ator_nacionalidade[]
  tbl_diretor_nacionalidade tbl_diretor_nacionalidade[]
}

model tbl_ator {
  id                     Int                      @id @default(autoincrement())
  nome                   String                   @db.VarChar(45)
  tb_sexo_id             Int?
  tbl_sexo               tbl_sexo?                @relation(fields: [tb_sexo_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_SEXO_ATOR")
  tbl_ator_nacionalidade tbl_ator_nacionalidade[]
  tbl_filme_ator         tbl_filme_ator[]

  @@index([tb_sexo_id], map: "FK_SEXO_ATOR")
}

model tbl_ator_nacionalidade {
  tbl_ator_id          Int
  tbl_nacionalidade_id Int
  tbl_ator             tbl_ator          @relation(fields: [tbl_ator_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ATOR_NACIONALIDADE")
  tbl_nacionalidade    tbl_nacionalidade @relation(fields: [tbl_nacionalidade_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_NACIONALIDADE_ATOR")

  @@id([tbl_ator_id, tbl_nacionalidade_id])
  @@index([tbl_nacionalidade_id], map: "FK_NACIONALIDADE_ATOR")
}

model tbl_avaliacao {
  id             Int          @id @default(autoincrement())
  nota           Decimal      @db.Decimal(3, 1)
  comentario     String?      @db.Text
  data_avaliacao DateTime     @db.Date
  tb_usuario_id  Int?
  tb_filme_id    Int?
  tbl_filme      Filme?       @relation(fields: [tb_filme_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_FILME_AVALIACAO")
  tbl_usuario    tbl_usuario? @relation(fields: [tb_usuario_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_USUARIO_AVALIACAO")

  @@index([tb_filme_id], map: "FK_FILME_AVALIACAO")
  @@index([tb_usuario_id], map: "FK_USUARIO_AVALIACAO")
}

model tbl_diretor {
  id                        Int                         @id @default(autoincrement())
  nome                      String                      @db.VarChar(45)
  tb_sexo_id                Int?
  tbl_sexo                  tbl_sexo?                   @relation(fields: [tb_sexo_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_SEXO_DIRETOR")
  tbl_diretor_nacionalidade tbl_diretor_nacionalidade[]
  tbl_filme_diretor         tbl_filme_diretor[]

  @@index([tb_sexo_id], map: "FK_SEXO_DIRETOR")
}

model tbl_diretor_nacionalidade {
  tb_diretor_id       Int
  tb_nacionalidade_id Int
  tbl_diretor         tbl_diretor       @relation(fields: [tb_diretor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_DIRETOR_NACIONALIDADE")
  tbl_nacionalidade   tbl_nacionalidade @relation(fields: [tb_nacionalidade_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_NACIONALIDADE_DIRETOR")

  @@id([tb_diretor_id, tb_nacionalidade_id])
  @@index([tb_nacionalidade_id], map: "FK_NACIONALIDADE_DIRETOR")
}

model tbl_filme_ator {
  tb_filme_id Int
  tb_ator_id  Int
  tbl_ator    tbl_ator @relation(fields: [tb_ator_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_ATOR_FILME")
  tbl_filme   Filme    @relation(fields: [tb_filme_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_FILME_ATOR")

  @@id([tb_filme_id, tb_ator_id])
  @@index([tb_ator_id], map: "FK_ATOR_FILME")
}

model tbl_filme_diretor {
  tb_filme_id   Int
  tb_diretor_id Int
  tbl_diretor   tbl_diretor @relation(fields: [tb_diretor_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_DIRETOR_FILME")
  tbl_filme     Filme       @relation(fields: [tb_filme_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_FILME_DIRETOR")

  @@id([tb_filme_id, tb_diretor_id])
  @@index([tb_diretor_id], map: "FK_DIRETOR_FILME")
}

model tbl_filme_genero {
  tb_filme_id  Int
  tb_genero_id Int
  tbl_filme    Filme  @relation(fields: [tb_filme_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_FILME_GENERO")
  tbl_genero   Genero @relation(fields: [tb_genero_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_GENERO_FILME")

  @@id([tb_filme_id, tb_genero_id])
  @@index([tb_genero_id], map: "FK_GENERO_FILME")
}

model tbl_filme_produtora {
  tb_filme_id     Int
  tb_produtora_id Int
  tbl_filme       Filme         @relation(fields: [tb_filme_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_FILME_PRODUTORA")
  tbl_produtora   tbl_produtora @relation(fields: [tb_produtora_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_PRODUTORA_FILME")

  @@id([tb_filme_id, tb_produtora_id])
  @@index([tb_produtora_id], map: "FK_PRODUTORA_FILME")
}

model tbl_legenda {
  id            Int       @id @default(autoincrement())
  formato       String    @db.VarChar(45)
  arquivo_url   String?   @db.VarChar(200)
  sincronizacao String?   @db.VarChar(45)
  data_criacao  DateTime? @db.Date
  tb_idioma_id  Int?
  tbl_idioma    Idioma?   @relation(fields: [tb_idioma_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_IDIOMA_LEGENDA")

  @@index([tb_idioma_id], map: "FK_IDIOMA_LEGENDA")
}

model tbl_pais {
  id            Int             @id @default(autoincrement())
  nome          String          @db.VarChar(45)
  tbl_filme     Filme[]
  tbl_produtora tbl_produtora[]
}

model tbl_produtora {
  id                  Int                   @id @default(autoincrement())
  nome                String                @db.VarChar(45)
  fundacao            String?               @db.VarChar(45)
  pais                String?               @db.VarChar(20)
  tb_pais_id          Int?
  tbl_filme_produtora tbl_filme_produtora[]
  tbl_pais            tbl_pais?             @relation(fields: [tb_pais_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_PAIS_PRODUTORA")

  @@index([tb_pais_id], map: "FK_PAIS_PRODUTORA")
}

model tbl_sexo {
  id          Int           @id @default(autoincrement())
  descricao   String        @db.VarChar(45)
  tbl_ator    tbl_ator[]
  tbl_diretor tbl_diretor[]
}

model tbl_usuario {
  id            Int             @id @default(autoincrement())
  nome          String          @db.VarChar(45)
  email         String          @db.VarChar(45)
  senha         String          @db.VarChar(45)
  tbl_avaliacao tbl_avaliacao[]
}
